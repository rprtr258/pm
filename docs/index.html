<!DOCTYPE html><html lang="en"><head><title>pm</title><meta charset="UTF-8" http-equiv="Content-Type"></meta><meta content="process manager" name="description"></meta><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"></meta><meta content="width=device-width, initial-scale=1" name="viewport"></meta><meta content="pm" property="og:title"></meta><meta content="process manager" property="og:description"></meta><meta content="website" property="og:type"></meta><meta content="https://rprtr258.github.io/pm/" property="og:url"></meta><meta content="https://rprtr258.github.io/pm/images/og-image.png" property="og:image"></meta><style>*, *:before, *:after { box-sizing: inherit; font-size: inherit; }
.markdown-section { margin: 0 auto; max-width: 95%; position: relative; }
.markdown-section a { border-bottom: var(--link-border-bottom); color: var(--link-color); overflow-wrap: anywhere; text-decoration: underline; }
.markdown-section a.anchor { border-bottom: 0; color: inherit; text-decoration: none; }
.markdown-section a.anchor:hover { color: inherit; text-decoration: underline; }
.markdown-section a:hover { border-bottom: var(--link-border-bottom--hover, var(--link-border-bottom, 0)); color: var(--link-color--hover, var(--link-color)); }
.markdown-section code, .markdown-section pre { border-radius: var(--code-block-border-radius); font-family: var(--code-font-family); font-size: var(--code-font-size); font-weight: var(--code-font-weight); hyphens: none; letter-spacing: normal; line-height: 1.2em; margin: var(--code-block-margin); overflow-wrap: anywhere; padding: 0; position: relative; tab-size: var(--code-tab-size); text-align: left; white-space: pre; word-break: normal; word-spacing: normal; word-wrap: normal; }
.markdown-section code:not([class*=lang-]):not([class*=language-]) { background: var(--code-inline-background); border-radius: var(--code-inline-border-radius); color: var(--code-inline-color, currentColor); margin: var(--code-inline-margin); padding: var(--code-inline-padding); white-space: nowrap; }
.markdown-section h1 { color: var(--heading-color); font-size: var(--heading-h1-font-size); font-weight: 400; line-height: 4.00rem; margin: 1rem 0rem -0.5rem 0rem; }
.markdown-section h1 a, .markdown-section h2 a, .markdown-section h3 a, .markdown-section h4 a, .markdown-section h5 a, .markdown-section h6 a { display: inline-block; }
.markdown-section h1 code, .markdown-section h2 code, .markdown-section h3 code, .markdown-section h4 code, .markdown-section h5 code, .markdown-section h6 code { font-size: .875em; }
.markdown-section h1+h2, .markdown-section h1+h3, .markdown-section h1+h4, .markdown-section h1+h5, .markdown-section h1+h6, .markdown-section h2+h3, .markdown-section h2+h4, .markdown-section h2+h5, .markdown-section h2+h6, .markdown-section h3+h4, .markdown-section h3+h5, .markdown-section h3+h6, .markdown-section h4+h5, .markdown-section h4+h6, .markdown-section h5+h6 { margin-top: 1rem; }
.markdown-section h1:first-child, .markdown-section h2:first-child, .markdown-section h3:first-child, .markdown-section h4:first-child, .markdown-section h5:first-child, .markdown-section h6:first-child { margin-top: 0; }
.markdown-section h2 { border-color: #e3e3e3; border-style: solid; border-width: 0 0 1px 0; color: var(--heading-color); font-size: var(--heading-h2-font-size); font-weight: 400; line-height: 1.55rem; margin: 2.5rem 0 1rem; padding: 0 0 0.75rem 0; }
.markdown-section h3 { color: var(--heading-color); font-size: var(--heading-h3-font-size); font-weight: 400; line-height: 1.35rem; margin: 1rem 0rem -.5rem 0rem; }
.markdown-section h4 { color: var(--heading-color); font-size: var(--heading-h4-font-size); font-weight: 400; line-height: 1.30rem; margin: 1rem 0rem -.5rem 0rem; }
.markdown-section h5 { color: var(--heading-color); font-size: var(--heading-h5-font-size); font-weight: 400; line-height: 1.25rem; margin: 1rem 0rem -.5rem 0rem; }
.markdown-section h6 { color: var(--heading-color); font-size: var(--heading-h6-font-size); font-weight: 400; line-height: 1.20rem; margin: 1rem 0rem 0rem 0rem; }
.markdown-section img { max-width: 100%; }
.markdown-section ol ol, .markdown-section ol ul, .markdown-section ul ol, .markdown-section ul ul { margin-bottom: .15rem; margin-top: .15rem; }
.markdown-section ol, .markdown-section ul { padding-left: 1.5rem; }
.markdown-section p, .markdown-section ol, .markdown-section ul { margin: 1em 0; }
.markdown-section pre code { display: block; overflow: auto; padding: 0.5em 1em; word-break: break-all; }
.markdown-section pre[data-lang]::after { color: inherit; content: attr(data-lang); font-size: var(--font-size-s); line-height: 1; opacity: .6; position: absolute; right: .75em; top: .75em; }
.markdown-section ul { list-style: square inside none; }
.sidebar { background: var(--sidebar-background); border-color: var(--sidebar-border-color); border-style: solid; border-width: var(--sidebar-border-width); display: flex; flex-direction: column; height: 100vh; overflow-x: hidden; overflow-y: auto; padding: var(--sidebar-padding); position: absolute; right: 100%; top: 0; transform: translateX(var(--sidebar-width)); visibility: visible; width: var(--sidebar-width); z-index: 10; }
.sidebar+.content { margin-left: var(--sidebar-width); }
.sidebar-nav { background: var(--sidebar-nav-background); margin: var(--sidebar-nav-margin); order: 1; padding: var(--sidebar-nav-padding); }
.sidebar-nav a { background: var(--sidebar-nav-link-background); border-color: var(--sidebar-nav-link-border-color); border-radius: var(--sidebar-nav-link-border-radius); border-style: var(--sidebar-nav-link-border-style); border-width: var(--sidebar-nav-link-border-width, 0); color: var(--sidebar-nav-link-color); display: block; font-weight: var(--sidebar-nav-link-font-weight); margin: var(--sidebar-nav-link-margin); overflow: visible; padding: var(--sidebar-nav-link-padding); text-decoration: var(--sidebar-nav-link-text-decoration); text-decoration-color: var(--sidebar-nav-link-text-decoration-color); text-overflow: ellipsis; white-space: break-spaces; }
.sidebar-nav a img { margin-top: -0.25em; vertical-align: middle; }
.sidebar-nav a img:first-child { margin-right: .5em; }
.sidebar-nav a:hover { background: var(--sidebar-nav-link-background--hover, var(--sidebar-nav-link-background)); border-color: var(--sidebar-nav-link-border-color--hover, var(--sidebar-nav-link-border-color)); border-style: var(--sidebar-nav-link-border-style--hover, var(--sidebar-nav-link-border-style)); border-width: var(--sidebar-nav-link-border-width--hover, var(--sidebar-nav-link-border-width, 0)); color: var(--sidebar-nav-link-color--hover, var(--sidebar-nav-link-color)); font-weight: var(--sidebar-nav-link-font-weight--hover, var(--sidebar-nav-link-font-weight)); text-decoration: var(--sidebar-nav-link-text-decoration--hover, var(--sidebar-nav-link-text-decoration)); text-decoration-color: var(--sidebar-nav-link-text-decoration-color); }
.sidebar-nav li>a { background-repeat: var(--sidebar-nav-pagelink-background-repeat); background-size: var(--sidebar-nav-pagelink-background-size); }
.sidebar-nav li>a:before { display: inline-block; }
.sidebar-nav li>a[href^="/"], .sidebar-nav li>a[href^="#/"] { background: var(--sidebar-nav-pagelink-background); }
.sidebar-nav li>a[href^="/"], .sidebar-nav li>a[href^="/"]~ul a, .sidebar-nav li>a[href^="#/"], .sidebar-nav li>a[href^="#/"]~ul a { padding: var(--sidebar-nav-pagelink-padding, var(--sidebar-nav-link-padding)); }
.sidebar-nav ul { list-style: none; margin: 0; padding: 0; }
.sidebar-nav ul ul { margin-left: var(--sidebar-nav-indent); }
.sidebar-nav ul>li:first-child>span,
  .sidebar-nav ul>li:first-child>strong { margin-top: 0; }
.sidebar-nav ul>li>span { border-color: var(--sidebar-nav-strong-border-color); border-style: solid; border-width: var(--sidebar-nav-strong-border-width, 0); color: var(--sidebar-nav-strong-color); display: block; font-size: var(--sidebar-nav-strong-font-size); font-weight: var(--sidebar-nav-strong-font-weight); margin: var(--sidebar-nav-strong-margin); padding: var(--sidebar-nav-strong-padding); text-transform: var(--sidebar-nav-strong-text-transform); }
.sidebar-nav ul>li>span+ul { margin-left: 0; }
.sidebar-nav>:last-child { margin-bottom: 2rem; }
.sidebar-nav>ul>li>a:before { color: var(--sidebar-nav-link-before-color-l1, var(--sidebar-nav-link-before-color)); content: var(--sidebar-nav-link-before-content-l1, var(--sidebar-nav-link-before-content)); margin: var(--sidebar-nav-link-before-margin-l1, var(--sidebar-nav-link-before-margin)); }
.sidebar-nav>ul>li>ul>li>a:before { color: var(--sidebar-nav-link-before-color-l2, var(--sidebar-nav-link-before-color)); content: var(--sidebar-nav-link-before-content-l2, var(--sidebar-nav-link-before-content)); margin: var(--sidebar-nav-link-before-margin-l2, var(--sidebar-nav-link-before-margin)); }
.sidebar-nav>ul>li>ul>li>ul>li>a:before { color: var(--sidebar-nav-link-before-color-l3, var(--sidebar-nav-link-before-color)); content: var(--sidebar-nav-link-before-content-l3, var(--sidebar-nav-link-before-content)); margin: var(--sidebar-nav-link-before-margin-l3, var(--sidebar-nav-link-before-margin)); }
.sidebar-nav>ul>li>ul>li>ul>li>ul>li>a:before { color: var(--sidebar-nav-link-before-color-l4, var(--sidebar-nav-link-before-color)); content: var(--sidebar-nav-link-before-content-l4, var(--sidebar-nav-link-before-content)); margin: var(--sidebar-nav-link-before-margin-l4, var(--sidebar-nav-link-before-margin)); }
.sidebar>h1 { background: var(--sidebar-name-background); color: var(--sidebar-name-color); font-family: var(--sidebar-name-font-family); font-size: var(--sidebar-name-font-size); font-weight: var(--sidebar-name-font-weight); margin: 0; padding: var(--sidebar-name-padding); text-align: var(--sidebar-name-text-align); }
.sidebar>h1 img { max-width: 100%; }
::selection { background: var(--selection-color); }
:root { --base-background-color: #ffffff; --base-color: #4d4d4d; --base-font-size: 1.125rem; --base-font-weight: normal; --base-line-height: 1.6; --border-radius-l: 8px; --border-radius-m: 4px; --border-radius-s: 2px; --code-block-border-radius: var(--border-radius-m); --code-block-margin: 1em 0; --code-font-family: Inconsolata, Consolas, Menlo, Monaco, "Andale Mono WT", "Andale Mono", "Lucida Console", "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Courier New", Courier, monospace; --code-font-size: calc(var(--font-size-m) * 0.95); --code-font-weight: normal; --code-inline-background: #e3e3e3; --code-inline-border-radius: var(--border-radius-s); --code-inline-color: var(--code-theme-text); --code-inline-margin: 0 0.15em; --code-inline-padding: 0.125em 0.4em; --code-tab-size: 4; --code-theme-background: #F7F7F7; --code-theme-comment: #6e8090; --code-theme-function: #333333; --code-theme-keyword: #690; --code-theme-operator: #4d4d4d; --code-theme-punctuation: #999; --code-theme-selector: #690; --code-theme-tag: #905; --code-theme-text: #333; --code-theme-variable: #905; --font-size-l: var(--modular-scale-2); --font-size-m: var(--modular-scale-1); --font-size-s: var(--modular-scale--1); --font-size-xl: var(--modular-scale-3); --font-size-xs: var(--modular-scale--2); --font-size-xxl: var(--modular-scale-4); --heading-color: #333333; --heading-h1-font-size: var(--font-size-xxl); --heading-h2-font-size: var(--font-size-xl); --heading-h3-font-size: var(--font-size-l); --heading-h4-font-size: var(--font-size-m); --heading-h5-font-size: var(--font-size-s); --heading-h6-font-size: var(--font-size-xs); --hr-border: 1px solid var(--mono-tint2); --link-color: #0374b5; --modular-scale: 1.333; --modular-scale--1: calc(var(--modular-scale-1) / var(--modular-scale)); --modular-scale--2: calc(var(--modular-scale--1) / var(--modular-scale)); --modular-scale-1: 1rem; --modular-scale-2: calc(var(--modular-scale-1) * var(--modular-scale)); --modular-scale-3: calc(var(--modular-scale-2) * var(--modular-scale)); --modular-scale-4: calc(var(--modular-scale-3) * var(--modular-scale)); --mono-base: hsl(var(--mono-hue), var(--mono-saturation), 50%); --mono-hue: 113; --mono-saturation: 0%; --mono-shade1: hsl(var(--mono-hue), var(--mono-saturation), 40%); --mono-shade2: hsl(var(--mono-hue), var(--mono-saturation), 30%); --mono-shade3: hsl(var(--mono-hue), var(--mono-saturation), 20%); --mono-tint1: hsl(var(--mono-hue), var(--mono-saturation), 70%); --mono-tint2: hsl(var(--mono-hue), var(--mono-saturation), 89%); --mono-tint3: hsl(var(--mono-hue), var(--mono-saturation), 97%); --navbar-menu-background: var(--base-background-color); --navbar-menu-box-shadow: rgba(45, 45, 45, 0.05) 0px 0px 1px, rgba(49, 49, 49, 0.05) 0px 1px 2px, rgba(42, 42, 42, 0.05) 0px 2px 4px, rgba(32, 32, 32, 0.05) 0px 4px 8px, rgba(49, 49, 49, 0.05) 0px 8px 16px, rgba(35, 35, 35, 0.05) 0px 16px 32px; --navbar-menu-link-border-style: solid; --navbar-menu-link-margin: 0.75em 0.5em; --navbar-menu-link-padding: 0.2em 0; --navbar-menu-padding: 0.5em; --navbar-root-border-style: solid; --navbar-root-color--active: var(--theme-color); --pre-font-size: var(--code-font-size); --selection-color: #b4d5fe; --sidebar-background: #F7F7F7; --sidebar-border-color: #e3e3e3; --sidebar-border-width: 0 1px 0 0; --sidebar-name-color: var(--theme-color); --sidebar-name-font-size: var(--font-size-l); --sidebar-name-font-weight: 300; --sidebar-name-margin: 1.5rem 0 0; --sidebar-name-text-align: center; --sidebar-nav-indent: 1em; --sidebar-nav-link-before-margin: 0 0.35em 0 0; --sidebar-nav-link-border-color: transparent; --sidebar-nav-link-border-color--active: #0374B5; --sidebar-nav-link-border-style: solid; --sidebar-nav-link-border-width: 0 4px 0 0; --sidebar-nav-link-color: var(--base-color); --sidebar-nav-link-color--active: var(--theme-color); --sidebar-nav-link-font-weight: normal; --sidebar-nav-link-font-weight--active: bold; --sidebar-nav-link-margin: 0 -25px 0 0; --sidebar-nav-link-padding: 0.25em 0; --sidebar-nav-link-text-decoration: none; --sidebar-nav-link-text-decoration--active: none; --sidebar-nav-link-text-decoration--hover: underline; --sidebar-nav-margin: 1.5rem 0 0; --sidebar-nav-pagelink-background: no-repeat 2px calc(50% - 2.5px) / 6px 5px linear-gradient(45deg, transparent 2.75px, var(--mono-tint1) 2.75px 4.25px, transparent 4px), no-repeat 2px calc(50% + 2.5px) / 6px 5px linear-gradient(135deg, transparent 2.75px, var(--mono-tint1) 2.75px 4.25px, transparent 4px); --sidebar-nav-pagelink-background--active: no-repeat 0px center / 5px 6px linear-gradient(225deg, transparent 2.75px, var(--theme-color) 2.75px 4.25px, transparent 4.25px), no-repeat 5px center / 5px 6px linear-gradient(135deg, transparent 2.75px, var(--theme-color) 2.75px 4.25px, transparent 4.25px); --sidebar-nav-pagelink-background--collapse: no-repeat 2px calc(50% - 2.5px) / 6px 5px linear-gradient(45deg, transparent 2.75px, var(--theme-color) 2.75px 4.25px, transparent 4px), no-repeat 2px calc(50% + 2.5px) / 6px 5px linear-gradient(135deg, transparent 2.75px, var(--theme-color) 2.75px 4.25px, transparent 4px); --sidebar-nav-pagelink-background--loaded: no-repeat 0px center / 5px 6px linear-gradient(225deg, transparent 2.75px, var(--mono-tint1) 2.75px 4.25px, transparent 4.25px), no-repeat 5px center / 5px 6px linear-gradient(135deg, transparent 2.75px, var(--mono-tint1) 2.75px 4.25px, transparent 4.25px); --sidebar-nav-pagelink-padding: 0.25em 0 0.25em 20px; --sidebar-nav-strong-border-color: #e3e3e3; --sidebar-nav-strong-border-width: 0 0 1px 0; --sidebar-nav-strong-color: var(--heading-color); --sidebar-nav-strong-font-size: smaller; --sidebar-nav-strong-font-weight: var(--strong-font-weight); --sidebar-nav-strong-margin: 1.5em 0 0.5em; --sidebar-nav-strong-padding: 0.25em 0; --sidebar-nav-strong-text-transform: uppercase; --sidebar-padding: 0 25px; --sidebar-width: 17rem; --small-font-size: var(--font-size-s); --strong-color: var(--heading-color); --strong-font-weight: 600; --subsup-font-size: var(--font-size-s); --theme-color: hsl(204, 90%, 45%); background-color: var(--base-background-color); box-sizing: border-box; color: var(--base-color); font-size: var(--base-font-size); font-weight: var(--base-font-weight); letter-spacing: var(--base-letter-spacing); line-height: var(--base-line-height); }
a { text-decoration: none; text-decoration-skip-ink: auto; }
body * { scrollbar-color: hsla(var(--mono-hue), var(--mono-saturation), 50%, 0.3) hsla(var(--mono-hue), var(--mono-saturation), 50%, 0.1); scrollbar-width: thin; }
body .sidebar { padding: var(--sidebar-padding); }
body.sticky .sidebar { position: fixed; }
code[class*=lang-], pre[data-lang] { color: var(--code-theme-text); }
hr { border: none; border-bottom: var(--hr-border, 0); height: 0; margin: 2em 0; }
html { font-family: "Source Sans Pro", "Helvetica Neue", Arial, sans-serif; }
main { display: block; min-height: 100vh; overflow-x: hidden; position: relative; }
pre { font-family: var(--code-font-family); font-size: var(--pre-font-size); font-weight: normal; }
pre[data-lang]::selection, code[class*=lang-]::selection { background: var(--code-theme-selection, var(--selection-color)); }</style></head><body class="sticky" style="margin: 0;"><main role="presentation"><aside class="sidebar" role="none"><div aria-label="primary" class="sidebar-nav" role="navigation"><ul><li><a class="section-link" href="#Installation" title="Installation">Installation</a></li><li><ul><li><a class="section-link" href="#Systemd service" title="Systemd service">Systemd service</a></li><li><ul></ul></li></ul></li><li><a class="section-link" href="#Configuration" title="Configuration">Configuration</a></li><li><ul></ul></li><li><a class="section-link" href="#Usage" title="Usage">Usage</a></li><li><ul><li><a class="section-link" href="#Run process" title="Run process">Run process</a></li><li><ul></ul></li><li><a class="section-link" href="#List processes" title="List processes">List processes</a></li><li><ul></ul></li><li><a class="section-link" href="#Start already added processes" title="Start already added processes">Start already added processes</a></li><li><ul></ul></li><li><a class="section-link" href="#Stop processes" title="Stop processes">Stop processes</a></li><li><ul></ul></li><li><a class="section-link" href="#Delete processes" title="Delete processes">Delete processes</a></li><li><ul></ul></li></ul></li><li><a class="section-link" href="#Process state diagram" title="Process state diagram">Process state diagram</a></li><li><ul></ul></li><li><a class="section-link" href="#Development" title="Development">Development</a></li><li><ul><li><a class="section-link" href="#Architecture" title="Architecture">Architecture</a></li><li><ul></ul></li><li><a class="section-link" href="#PM directory structure" title="PM directory structure">PM directory structure</a></li><li><ul></ul></li><li><a class="section-link" href="#Differences from pm2" title="Differences from pm2">Differences from pm2</a></li><li><ul></ul></li><li><a class="section-link" href="#Release" title="Release">Release</a></li><li><ul></ul></li></ul></li></ul></div></aside><section class="content"><article class="markdown-section" id="main" role="main"><h1 id="PM (process manager)"><a class="anchor" href="#PM (process manager)"><span>PM (process manager)</span></a></h1><h2 id="Installation"><a class="anchor" href="#Installation"><span>Installation</span></a></h2><p>PM is available only for linux due to heavy usage of linux mechanisms. Go to the <a href="https://github.com/rprtr258/pm/releases/latest" target="_top">releases</a> page to download the latest binary.</p><pre data-lang="sh" style="background: var(--code-theme-background);"><code class="language-sh"><span style="color: var(--code-theme-comment);"># download binary</span>
<span style="color: var(--code-theme-function);">wget</span> https://github.com/rprtr258/pm/releases/latest/download/pm_linux_amd64
<span style="color: var(--code-theme-comment);"># make binary executable</span>
<span style="color: var(--code-theme-function);">chmod</span> +x pm_linux_amd64
<span style="color: var(--code-theme-comment);"># move binary to $PATH, here just local</span>
<span style="color: var(--code-theme-function);">mv</span> pm_linux_amd64 pm
</code></pre><h3 id="Systemd service"><a class="anchor" href="#Systemd service"><span>Systemd service</span></a></h3><p>To enable running processes on system startup:</p><ul><li>Copy <a href="https://github.com/rprtr258/pm/blob/master/./pm.service"><code>pm.service</code></a> file locally. This is the systemd service file that tells systemd how to manage your application.</li><li>Change <code>User</code> field to your own username. This specifies under which user account the service will run, which affects permissions and environment.</li><li>Change <code>ExecStart</code> to use <code>pm</code> binary installed. This is the command that systemd will execute to start your service.</li><li>Move the file to <code>/etc/systemd/system/pm.service</code> and set root permissions on it:</li></ul><pre data-lang="sh" style="background: var(--code-theme-background);"><code class="language-sh"><span style="color: var(--code-theme-comment);"># copy service file to system's directory for systemd services</span>
<span style="color: var(--code-theme-function);">sudo</span> <span style="color: var(--code-theme-function);">cp</span> pm.service /etc/systemd/system/pm.service
<span style="color: var(--code-theme-comment);"># set permission of service file to be readable and writable by owner, and readable by others</span>
<span style="color: var(--code-theme-function);">sudo</span> <span style="color: var(--code-theme-function);">chmod</span> <span style="color: var(--code-theme-tag);">644</span> /etc/systemd/system/pm.service
<span style="color: var(--code-theme-comment);"># change owner and group of service file to root, ensuring that it is managed by system administrator</span>
<span style="color: var(--code-theme-function);">sudo</span> <span style="color: var(--code-theme-function);">chown</span> root:root /etc/systemd/system/pm.service
<span style="color: var(--code-theme-comment);"># reload systemd manager configuration, scanning for new or changed units</span>
<span style="color: var(--code-theme-function);">sudo</span> systemctl daemon-reload
<span style="color: var(--code-theme-comment);"># enables service to start at boot time</span>
<span style="color: var(--code-theme-function);">sudo</span> systemctl <span class="token class-name" style="color: var(--code-theme-selector);">enable</span> pm
<span style="color: var(--code-theme-comment);"># starts service immediately</span>
<span style="color: var(--code-theme-function);">sudo</span> systemctl start pm
<span style="color: var(--code-theme-comment);"># soft link /usr/bin/pm binary to whenever it is installed</span>
<span style="color: var(--code-theme-function);">sudo</span> <span style="color: var(--code-theme-function);">ln</span> <span style="color: var(--code-theme-variable);">-s</span> ~/go/bin/pm /usr/bin/pm
</code></pre><p>After these commands, processes with <code>startup: true</code> config option will be started on system startup.</p><h2 id="Configuration"><a class="anchor" href="#Configuration"><span>Configuration</span></a></h2><p><a href="https://jsonnet.org/" target="_top">jsonnet</a> configuration language is used. It is also fully compatible with plain JSON, so you can write JSON instead.</p><p>See <a href="https://github.com/rprtr258/pm/blob/master/./config.jsonnet">example configuration file</a>. Other examples can be found in <a href="https://github.com/rprtr258/pm/blob/master/./e2e/tests">tests</a> directory.</p><h2 id="Usage"><a class="anchor" href="#Usage"><span>Usage</span></a></h2><p>Most fresh usage descriptions can be seen using <code>pm &lt;command&gt; --help</code>.</p><h3 id="Run process"><a class="anchor" href="#Run process"><span>Run process</span></a></h3><pre data-lang="sh" style="background: var(--code-theme-background);"><code class="language-sh"><span style="color: var(--code-theme-comment);"># run process using command</span>
pm run go run main.go

<span style="color: var(--code-theme-comment);"># run processes from config file</span>
pm run <span style="color: var(--code-theme-variable);">--config</span> config.jsonnet
</code></pre><h3 id="List processes"><a class="anchor" href="#List processes"><span>List processes</span></a></h3><pre data-lang="sh" style="background: var(--code-theme-background);"><code class="language-sh">pm list
</code></pre><h3 id="Start already added processes"><a class="anchor" href="#Start already added processes"><span>Start already added processes</span></a></h3><pre data-lang="sh" style="background: var(--code-theme-background);"><code class="language-sh">pm start <span style="color: var(--code-theme-punctuation);">[</span>ID/NAME/TAG<span style="color: var(--code-theme-punctuation);">]</span><span style="color: var(--code-theme-punctuation);">...</span>
</code></pre><h3 id="Stop processes"><a class="anchor" href="#Stop processes"><span>Stop processes</span></a></h3><pre data-lang="sh" style="background: var(--code-theme-background);"><code class="language-sh">pm stop <span style="color: var(--code-theme-punctuation);">[</span>ID/NAME/TAG<span style="color: var(--code-theme-punctuation);">]</span><span style="color: var(--code-theme-punctuation);">...</span>

<span style="color: var(--code-theme-comment);"># e.g. stop all added processes (all processes has tag `all` by default)</span>
pm stop all
</code></pre><h3 id="Delete processes"><a class="anchor" href="#Delete processes"><span>Delete processes</span></a></h3><p>When deleting process, they are first stopped, then removed from <code>pm</code>.</p><pre data-lang="sh" style="background: var(--code-theme-background);"><code class="language-sh">pm delete <span style="color: var(--code-theme-punctuation);">[</span>ID/NAME/TAG<span style="color: var(--code-theme-punctuation);">]</span><span style="color: var(--code-theme-punctuation);">...</span>

<span style="color: var(--code-theme-comment);"># e.g. delete all processes</span>
pm delete all
</code></pre><h2 id="Process state diagram"><a class="anchor" href="#Process state diagram"><span>Process state diagram</span></a></h2><div class="mermaid" data-processed="true"><svg aria-roledescription="flowchart-v2" id="mermaid-1722776679139" role="graphics-document document" style="max-width: 370.84375px;" viewBox="-8 -8 370.84375 520.125" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><style>#mermaid-1722776679139{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-1722776679139 .error-icon{fill:#552222;}#mermaid-1722776679139 .error-text{fill:#552222;stroke:#552222;}#mermaid-1722776679139 .edge-thickness-normal{stroke-width:2px;}#mermaid-1722776679139 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1722776679139 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1722776679139 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1722776679139 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1722776679139 .marker{fill:#333333;stroke:#333333;}#mermaid-1722776679139 .marker.cross{stroke:#333333;}#mermaid-1722776679139 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-1722776679139 .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-1722776679139 .cluster-label text{fill:#333;}#mermaid-1722776679139 .cluster-label span,#mermaid-1722776679139 p{color:#333;}#mermaid-1722776679139 .label text,#mermaid-1722776679139 span,#mermaid-1722776679139 p{fill:#333;color:#333;}#mermaid-1722776679139 .node rect,#mermaid-1722776679139 .node circle,#mermaid-1722776679139 .node ellipse,#mermaid-1722776679139 .node polygon,#mermaid-1722776679139 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-1722776679139 .flowchart-label text{text-anchor:middle;}#mermaid-1722776679139 .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaid-1722776679139 .node .label{text-align:center;}#mermaid-1722776679139 .node.clickable{cursor:pointer;}#mermaid-1722776679139 .arrowheadPath{fill:#333333;}#mermaid-1722776679139 .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-1722776679139 .flowchart-link{stroke:#333333;fill:none;}#mermaid-1722776679139 .edgeLabel{background-color:#e8e8e8;text-align:center;}#mermaid-1722776679139 .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#mermaid-1722776679139 .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#mermaid-1722776679139 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-1722776679139 .cluster text{fill:#333;}#mermaid-1722776679139 .cluster span,#mermaid-1722776679139 p{color:#333;}#mermaid-1722776679139 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-1722776679139 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaid-1722776679139 :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker class="marker flowchart" id="mermaid-1722776679139_flowchart-pointEnd" markerHeight="12" markerUnits="userSpaceOnUse" markerWidth="12" orient="auto" refX="6" refY="5" viewBox="0 0 10 10"><path class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker class="marker flowchart" id="mermaid-1722776679139_flowchart-pointStart" markerHeight="12" markerUnits="userSpaceOnUse" markerWidth="12" orient="auto" refX="4.5" refY="5" viewBox="0 0 10 10"><path class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker class="marker flowchart" id="mermaid-1722776679139_flowchart-circleEnd" markerHeight="11" markerUnits="userSpaceOnUse" markerWidth="11" orient="auto" refX="11" refY="5" viewBox="0 0 10 10"><circle class="arrowMarkerPath" cx="5" cy="5" r="5" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker class="marker flowchart" id="mermaid-1722776679139_flowchart-circleStart" markerHeight="11" markerUnits="userSpaceOnUse" markerWidth="11" orient="auto" refX="-1" refY="5" viewBox="0 0 10 10"><circle class="arrowMarkerPath" cx="5" cy="5" r="5" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker class="marker cross flowchart" id="mermaid-1722776679139_flowchart-crossEnd" markerHeight="11" markerUnits="userSpaceOnUse" markerWidth="11" orient="auto" refX="12" refY="5.2" viewBox="0 0 11 11"><path class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><marker class="marker cross flowchart" id="mermaid-1722776679139_flowchart-crossStart" markerHeight="11" markerUnits="userSpaceOnUse" markerWidth="11" orient="auto" refX="-1" refY="5.2" viewBox="0 0 11 11"><path class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><g class="root"><g class="clusters"><g class="cluster default flowchart-label" id="Running"><rect height="306.953125" rx="0" ry="0" width="354.84375" x="0" y="197.171875"></rect><g class="cluster-label" transform="translate(147.6171875, 197.171875)"><foreignobject height="22.390625" width="59.609375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Running</span></div></foreignobject></g></g></g><g class="edgePaths"><path class="edge-thickness-normal edge-pattern-solid flowchart-link LS-0 LE-S" d="M176.344,15L176.344,21.033C176.344,27.065,176.344,39.13,176.344,50.312C176.344,61.494,176.344,71.792,176.344,76.941L176.344,82.091" id="L-0-S-0" marker-end="url(#mermaid-1722776679139_flowchart-pointEnd)" style="fill:none;"></path><path class="edge-thickness-normal edge-pattern-solid flowchart-link LS-C LE-R" d="M74.695,259.563L74.695,265.595C74.695,271.628,74.695,283.693,78.881,295.063C83.066,306.433,91.437,317.108,95.622,322.445L99.808,327.782" id="L-C-R-0" marker-end="url(#mermaid-1722776679139_flowchart-pointEnd)" style="fill:none;"></path><path class="edge-thickness-normal edge-pattern-solid flowchart-link LS-R LE-A" d="M117.738,369.344L117.738,375.376C117.738,381.409,117.738,393.474,126.825,405.156C135.912,416.838,154.086,428.137,163.173,433.787L172.26,439.436" id="L-R-A-0" marker-end="url(#mermaid-1722776679139_flowchart-pointEnd)" style="fill:none;"></path><path class="edge-thickness-normal edge-pattern-solid flowchart-link LS-A LE-C" d="M209.261,442.234L209.911,436.118C210.56,430.003,211.86,417.771,212.51,402.507C213.16,387.242,213.16,368.945,213.16,350.648C213.16,332.352,213.16,314.055,196.897,298.459C180.635,282.864,148.109,269.97,131.846,263.523L115.583,257.076" id="L-A-C-0" marker-end="url(#mermaid-1722776679139_flowchart-pointEnd)" style="fill:none;"></path><path class="edge-thickness-normal edge-pattern-solid flowchart-link LS-A LE-S" d="M232.858,442.234L241.122,436.118C249.386,430.003,265.915,417.771,274.179,402.507C282.443,387.242,282.443,368.945,282.443,350.648C282.443,332.352,282.443,314.055,282.443,295.758C282.443,277.461,282.443,259.164,282.443,242.733C282.443,226.302,282.443,211.737,282.443,198.422C282.443,185.107,282.443,173.042,271.567,161.382C260.692,149.723,238.94,138.47,228.064,132.843L217.188,127.217" id="L-A-S-0" marker-end="url(#mermaid-1722776679139_flowchart-pointEnd)" style="fill:none;"></path><path class="edge-thickness-normal edge-pattern-solid flowchart-link LS-S LE-C" d="M141.723,124.781L130.552,130.814C119.381,136.846,97.038,148.911,85.867,160.977C74.695,173.042,74.695,185.107,74.695,194.423C74.695,203.739,74.695,210.305,74.695,213.589L74.695,216.872" id="L-S-C-0" marker-end="url(#mermaid-1722776679139_flowchart-pointEnd)" style="fill:none;"></path><path class="edge-thickness-normal edge-pattern-solid flowchart-link LS-Running LE-S" d="M160.781,197.172L160.781,191.139C160.781,185.107,160.781,173.042,162.251,161.826C163.72,150.611,166.659,140.246,168.128,135.063L169.598,129.88" id="L-Running-S-0" marker-end="url(#mermaid-1722776679139_flowchart-pointEnd)" style="fill:none;"></path></g><g class="edgeLabels"><g class="edgeLabel" transform="translate(176.34375, 51.1953125)"><g class="label" transform="translate(-44.9140625, -11.1953125)"><foreignobject height="22.390625" width="89.828125"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">new process</span></div></foreignobject></g></g><g class="edgeLabel" transform="translate(74.6953125, 295.7578125)"><g class="label" transform="translate(-54.6953125, -11.1953125)"><foreignobject height="22.390625" width="109.390625"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">process started</span></div></foreignobject></g></g><g class="edgeLabel" transform="translate(117.73828125, 405.5390625)"><g class="label" transform="translate(-45.359375, -11.1953125)"><foreignobject height="22.390625" width="90.71875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">process died</span></div></foreignobject></g></g><g class="edgeLabel" transform="translate(213.16015625, 350.6484375)"><g class="label" transform="translate(-12.453125, -11.1953125)"><foreignobject height="22.390625" width="24.90625"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">yes</span></div></foreignobject></g></g><g class="edgeLabel" transform="translate(282.443359375, 295.7578125)"><g class="label" transform="translate(-8.8984375, -11.1953125)"><foreignobject height="22.390625" width="17.796875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">no</span></div></foreignobject></g></g><g class="edgeLabel" transform="translate(74.6953125, 160.9765625)"><g class="label" transform="translate(-15.5625, -11.1953125)"><foreignobject height="22.390625" width="31.125"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">start</span></div></foreignobject></g></g><g class="edgeLabel" transform="translate(160.97582, 160.2903)"><g class="label" transform="translate(-15.125, -11.1953125)"><foreignobject height="22.390625" width="30.25"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">stop</span></div></foreignobject></g></g></g><g class="nodes"><g class="node default flowchart-label" data-node="true" id="flowchart-0-0" transform="translate(176.34375, 7.5)"><rect class="basic label-container" height="15" rx="5" ry="5" width="15" x="-7.5" y="-7.5"></rect><g class="label" transform="translate(0, 0)"><rect></rect><foreignobject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"></span></div></foreignobject></g></g><g class="node default default flowchart-label" data-node="true" id="flowchart-R-3" transform="translate(117.73828125, 350.6484375)"><rect class="basic label-container" height="37.390625" rx="5" ry="5" width="74.609375" x="-37.3046875" y="-18.6953125"></rect><g class="label" transform="translate(-29.8046875, -11.1953125)"><rect></rect><foreignobject height="22.390625" width="59.609375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Running</span></div></foreignobject></g></g><g class="node default default flowchart-label" data-node="true" id="flowchart-C-2" transform="translate(74.6953125, 240.8671875)"><rect class="basic label-container" height="37.390625" rx="5" ry="5" width="71.921875" x="-35.9609375" y="-18.6953125"></rect><g class="label" transform="translate(-28.4609375, -11.1953125)"><rect></rect><foreignobject height="22.390625" width="56.921875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Created</span></div></foreignobject></g></g><g class="node default default flowchart-label" data-node="true" id="flowchart-A-4" transform="translate(206.48828125, 460.4296875)"><polygon class="label-container" points="9.34765625,0 217.36328125,0 226.7109375,-18.6953125 217.36328125,-37.390625 9.34765625,-37.390625 0,-18.6953125" transform="translate(-113.35546875,18.6953125)"></polygon><g class="label" transform="translate(-96.5078125, -11.1953125)"><rect></rect><foreignobject height="22.390625" width="193.015625"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">autorestart/watch enabled?</span></div></foreignobject></g></g><g class="node default default flowchart-label" data-node="true" id="flowchart-S-1" transform="translate(176.34375, 106.0859375)"><rect class="basic label-container" height="37.390625" rx="5" ry="5" width="74.609375" x="-37.3046875" y="-18.6953125"></rect><g class="label" transform="translate(-29.8046875, -11.1953125)"><rect></rect><foreignobject height="22.390625" width="59.609375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Stopped</span></div></foreignobject></g></g></g></g></g></svg></div><h2 id="Development"><a class="anchor" href="#Development"><span>Development</span></a></h2><h3 id="Architecture"><a class="anchor" href="#Architecture"><span>Architecture</span></a></h3><p><code>pm</code> consists of two parts:</p><ul><li><b>cli client</b> - requests server, launches/stops shim processes</li><li><b>shim</b> - monitors and restarts processes, handle watches, signals and shutdowns</li></ul><h3 id="PM directory structure"><a class="anchor" href="#PM directory structure"><span>PM directory structure</span></a></h3><p><code>pm</code> uses directory <code>$HOME/.pm</code> to store data by default. <code>PM_HOME</code> environment variable can be used to change this. Layout is following:</p><pre data-lang="sh" style="background: var(--code-theme-background);"><code class="language-sh"><span style="color: var(--code-theme-tag);">$HOME</span>/.pm/
├──config.json <span style="color: var(--code-theme-comment);"># pm config file</span>
├──db/ <span style="color: var(--code-theme-comment);"># database tables</span>
│   └──<span style="color: var(--code-theme-operator);">&lt;</span>ID<span style="color: var(--code-theme-operator);">&gt;</span> <span style="color: var(--code-theme-comment);"># process info</span>
└──logs/ <span style="color: var(--code-theme-comment);"># processes logs</span>
    ├──<span style="color: var(--code-theme-operator);">&lt;</span>ID<span style="color: var(--code-theme-operator);">&gt;</span>.stdout <span style="color: var(--code-theme-comment);"># stdout of process with id ID</span>
    └──<span style="color: var(--code-theme-operator);">&lt;</span>ID<span style="color: var(--code-theme-operator);">&gt;</span>.stderr <span style="color: var(--code-theme-comment);"># stderr of process with id ID</span>
</code></pre><h3 id="Differences from pm2"><a class="anchor" href="#Differences from pm2"><span>Differences from pm2</span></a></h3><ul><li><code>pm</code> is just a single binary, not dependent on <code>nodejs</code> and bunch of <code>js</code> scripts</li><li><a href="https://jsonnet.org/" target="_top">jsonnet</a> configuration language, back compatible with <code>JSON</code> and allows to thoroughly configure processes, e.g. separate environments without requiring corresponding mechanism in <code>pm</code> (others configuration languages might be added in future such as <code>Procfile</code>, <code>HCL</code>, etc.)</li><li>supports only <code>linux</code> now</li><li>I can fix problems/add features as I need, independent of whether they work or not in <code>pm2</code> because I don't know <code>js</code></li><li>fast and convenient (I hope so)</li><li>no specific integrations for <code>js</code></li></ul><h3 id="Release"><a class="anchor" href="#Release"><span>Release</span></a></h3><p>On <code>master</code> branch:</p><pre data-lang="sh" style="background: var(--code-theme-background);"><code class="language-sh"><span style="color: var(--code-theme-function);">git</span> tag v1.2.3
<span style="color: var(--code-theme-function);">git</span> push <span style="color: var(--code-theme-variable);">--tags</span>
goreleaser release <span style="color: var(--code-theme-variable);">--clean</span>
</code></pre></article></section></main></body></html>