=== in-work

=== technical debt
* make `executable + arguments` run options be available
* run daemon if not running before executing (almost) any command
* self autoupdate
* use grpc status codes for server response errors
* serialize/deserialize protobuffers into database
* manage ids ourself, leveraging minimal not used id for new proc
* try https://github.com/dgraph-io/badger
* draw processes states/transitions diagrams
* fix not showing error on failed start tests/main.go second time
* fix someone holding $home/pm.pid file on daemon restart
* fix writing,creating pid file for the first time

=== features
* administrative tasks for processes: pull repo, seed db, etc.
* config file with process definitions
** run specific processes from config
** pause/return processes
** specify cwd
** jsonnet config
*** runsit
*** For instance I use following config (nginx.json) for nginx:
```toml
pidfile = "goforever.pid"
logfile = "goforever.log"
errfile = "goforever.log"

[[process]]
name = "example-panic"
command = "./example/example-panic"
pidfile = "example/example-panic.pid"
logfile = "example/logs/example-panic.debug.log"
errfile = "example/logs/example-panic.errors.log"
respawn = 1
delay = "1m"
ping = "30s"

[[process]]
name = "example"
command = "./example/example"
args = ["-name=foo"]
pidfile = "example/example.pid"
logfile = "example/logs/example.debug.log"
errfile = "example/logs/example.errors.log"
respawn = 1
```
```json
echo "daemon off;" >> /etc/nginx/nginx.conf
{
    "user": ["_env", "${USER}"],
    "cwd": "/var/www",
    "standardEnv": true,
    "numFiles": 1024,
    "binary": "/usr/sbin/nginx"
}
```
*** And php-fpm.json:
```json
{
    "user": ["_env", "${USER}"],
    "cwd": "/usr/sbin",
    "standardEnv": true,
    "numFiles": 1024,
    "binary": "php-fpm",
    "args": ["-F"]
}
```
* additional commands
** `version`
** `daemon restart`
* implement different list formats
** `table`
** `short list`
** `json`
** `go format template`
* gen name if not provided
* `pm start` recognizing cmd&args vs ids/names/tags of processes in pm list to run
* add "smart filtering"" to delete and stop cmds
* `-i/...` flag to confirm which procs will be stopped
* bash autocomplete
* provide envs from dotenv/...
* start only processes with changed config
* watch: restart process on file change
**  https://github.com/fsnotify/fsnotify
**  https://github.com/cortesi/modd
**  https://github.com/eradman/entr
**  https://github.com/cespare/reflex
**  https://github.com/cosmtrek/air
* run and attach (e.g. interactively), stop on Ctrl-C
* show logs of several proccesses simultanuously
* logrotaion:
** https://github.com/natefinch/lumberjack
** https://github.com/keymetrics/pm2-logrotate
* dashboard:
** https://github.com/VividCortex/pm-web
** https://github.com/keymetrics/pm2-server-monit
** https://github.com/Unitech/pm2-dev

=== bugfixes
* fix "reborn failed: daemon: Resource temporarily unavailable" on start when daemon is already running
    https://ieftimov.com/posts/four-steps-daemonize-your-golang-programs/
    https://groups.google.com/g/golang-nuts/c/othxUDO-EoE
    https://gist.github.com/nxghtmvrx/daf25008acab9f099517e21f8ad80e15
    http://git.musl-libc.org/cgit/musl/tree/src/legacy/daemon.c
    https://github.com/fiorix/go-daemon/blob/master/god.c
    https://topic.alibabacloud.com/a/golang-service-program-daemon-pit-record_1_38_30917603.html
    https://github.com/Iwark/godaemon
    https://github.com/chaten/go-daemon
    https://github.com/mephux/envdb
    https://habr.com/ru/post/586604/
    https://habr.com/ru/post/187668/
    https://web.archive.org/web/20201025151134/https://habr.com/ru/post/129207/
    https://github.com/sevlyar/go-daemon/
    https://github.com/VividCortex/godaemon
* if `~home/logs` does not exist - create
* actually stop proc on server.Stop method
* delete cmd must also delete log files

=== existing projects:
* https://github.com/ddollar/foreman#ports
* js:
** https://github.com/keymetrics/pm2-io-agent-node
** https://github.com/keymetrics/pm2-io-agent
** https://github.com/keymetrics/pm2-io-js-api
** https://github.com/keymetrics/pm2-io-apm
** https://github.com/Unitech/pm2-deploy
* go:
** https://github.com/mattn/goreman
** https://github.com/deref/exo
** https://github.com/ionrock/procs
** https://github.com/prasanthmj/qup
** https://github.com/struCoder/pmgo
** https://github.com/topfreegames/apm
** https://github.com/ShinyTrinkets/overseer
** https://github.com/hmdsefi/gowl
** https://github.com/bradfitz/runsit
** https://github.com/skanehira/pst
** https://github.com/godpm/godpm
** https://github.com/VividCortex/pm
* ruby:
** https://github.com/ddollar/foreman
** http://ddollar.github.io/foreman/
